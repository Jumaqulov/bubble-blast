import Phaser from "phaser";

export type PhosphorIconId = "swap" | "aim" | "bomb" | "star" | "starFilled";

const ICON_SVGS: Record<PhosphorIconId, string> = {
    swap: "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"256\" height=\"256\" viewBox=\"0 0 256 256\" fill=\"#FFFFFF\"><path d=\"M224,48V96a8,8,0,0,1-8,8H168a8,8,0,0,1,0-16h28.69L182.06,73.37a79.56,79.56,0,0,0-56.13-23.43h-.45A79.52,79.52,0,0,0,69.59,72.71,8,8,0,0,1,58.41,61.27a96,96,0,0,1,135,.79L208,76.69V48a8,8,0,0,1,16,0ZM186.41,183.29a80,80,0,0,1-112.47-.66L59.31,168H88a8,8,0,0,0,0-16H40a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V179.31l14.63,14.63A95.43,95.43,0,0,0,130,222.06h.53a95.36,95.36,0,0,0,67.07-27.33,8,8,0,0,0-11.18-11.44Z\"/></svg>",
    aim: "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"256\" height=\"256\" viewBox=\"0 0 256 256\" fill=\"#FFFFFF\"><path d=\"M232,120h-8.34A96.14,96.14,0,0,0,136,32.34V24a8,8,0,0,0-16,0v8.34A96.14,96.14,0,0,0,32.34,120H24a8,8,0,0,0,0,16h8.34A96.14,96.14,0,0,0,120,223.66V232a8,8,0,0,0,16,0v-8.34A96.14,96.14,0,0,0,223.66,136H232a8,8,0,0,0,0-16Zm-96,87.6V200a8,8,0,0,0-16,0v7.6A80.15,80.15,0,0,1,48.4,136H56a8,8,0,0,0,0-16H48.4A80.15,80.15,0,0,1,120,48.4V56a8,8,0,0,0,16,0V48.4A80.15,80.15,0,0,1,207.6,120H200a8,8,0,0,0,0,16h7.6A80.15,80.15,0,0,1,136,207.6ZM128,88a40,40,0,1,0,40,40A40,40,0,0,0,128,88Zm0,64a24,24,0,1,1,24-24A24,24,0,0,1,128,152Z\"/></svg>",
    bomb: "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"256\" height=\"256\" viewBox=\"0 0 256 256\" fill=\"#FFFFFF\"><path d=\"M248,32h0a8,8,0,0,0-8,8,52.66,52.66,0,0,1-3.57,17.39C232.38,67.22,225.7,72,216,72c-11.06,0-18.85-9.76-29.49-24.65C176,32.66,164.12,16,144,16c-16.39,0-29,8.89-35.43,25a66.07,66.07,0,0,0-3.9,15H88A16,16,0,0,0,72,72v9.59A88,88,0,0,0,112,248h1.59A88,88,0,0,0,152,81.59V72a16,16,0,0,0-16-16H120.88a46.76,46.76,0,0,1,2.69-9.37C127.62,36.78,134.3,32,144,32c11.06,0,18.85,9.76,29.49,24.65C184,71.34,195.88,88,216,88c16.39,0,29-8.89,35.43-25A68.69,68.69,0,0,0,256,40,8,8,0,0,0,248,32ZM140.8,94a72,72,0,1,1-57.6,0A8,8,0,0,0,88,86.66V72h48V86.66A8,8,0,0,0,140.8,94ZM111.89,209.32A8,8,0,0,1,104,216a8.52,8.52,0,0,1-1.33-.11,57.5,57.5,0,0,1-46.57-46.57,8,8,0,1,1,15.78-2.64,41.29,41.29,0,0,0,33.43,33.43A8,8,0,0,1,111.89,209.32Z\"/></svg>",
    // --- YANGI QO'SHILGANLAR ---
    star: "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"256\" height=\"256\" viewBox=\"0 0 256 256\" fill=\"#FFFFFF\"><path d=\"M239.2,97.29a16,16,0,0,0-13.81-11L166.5,83.13,142.23,29.35a16,16,0,0,0-28.46,0L89.5,83.13,30.61,86.28A16,16,0,0,0,21.5,114.2l45,38.38L52.23,209.8a16,16,0,0,0,24,17.44L128,195.27l51.76,31.97a16,16,0,0,0,24-17.44l-14.25-57.22,45-38.38A16,16,0,0,0,239.2,97.29Zm-83,63.12a8,8,0,0,0-2.52,7.76l11.3,45.36L122.3,187.2a8.06,8.06,0,0,0-8.6,0L71,213.53l11.3-45.36a8,8,0,0,0-2.52-7.76L44.47,123.4l46.21-2.47a8.07,8.07,0,0,0,6.66-4.83L128,73.18l30.66,42.92a8.07,8.07,0,0,0,6.66,4.83l46.21,2.47Z\"/></svg>",
    starFilled: "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"256\" height=\"256\" viewBox=\"0 0 256 256\" fill=\"#FFFFFF\"><path d=\"M239.2,97.29a16,16,0,0,0-13.81-11L166.5,83.13,142.23,29.35a16,16,0,0,0-28.46,0L89.5,83.13,30.61,86.28A16,16,0,0,0,21.5,114.2l45,38.38L52.23,209.8a16,16,0,0,0,24,17.44L128,195.27l51.76,31.97a16,16,0,0,0,24-17.44l-14.25-57.22,45-38.38A16,16,0,0,0,239.2,97.29Z\"/></svg>",
};

const PREFIX = "phosphor-";

export function getPhosphorKey(id: PhosphorIconId): string {
    return `${PREFIX}${id}`;
}

export function ensurePhosphorTextures(scene: Phaser.Scene): void {
    (Object.keys(ICON_SVGS) as PhosphorIconId[]).forEach((id) => {
        const key = getPhosphorKey(id);
        if (scene.textures.exists(key)) return;
        const svg = ICON_SVGS[id];
        const data = `data:image/svg+xml;base64,${btoa(svg)}`;
        scene.textures.addBase64(key, data);
    });
}
